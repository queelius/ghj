{{/* 
    ghproject.html
    This template displays a single GitHub project page with detailed information, including featured images, summary, author details, and related projects.

    Assumptions:
    - Each project is generated by `gh-render.py` into `content/projects/<repo-name>/index.md`.
    - Front matter includes title, author, email, summary, links, and tags.
    - Featured image is named `featured.png` or similar and placed in `static/images/<repo-name>/`.
    - Uses the Ananke theme's partials and styling conventions.
    
    Integration:
    - Place this file in `layouts/ghprojects/ghproject.html`.
    - Ensure the front matter in generated Markdown sets `layout = "ghproject"`.
    - Customize CSS styles as needed to match your site's design language.
*/}}

{{ define "header" }}
    {{ partial "page-header.html" . }}
{{ end }}

{{ define "main" }}
<section class="project-section" style="padding: 2rem; background-color: #f9f9f9;">
    <div class="container" style="max-width: 1200px; margin: 0 auto;">
        <!-- Two-column layout: Main Content and Sidebar -->
        <div style="
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        ">
            <!-- Main Project Content -->
            <div>
                <!-- Project Header: Title, Author, Date, and Summary -->
                <header style="margin-bottom: 2rem;">
                    <h1 style="font-size: 2.5rem; font-weight: 700; color: #333;">{{ .Title }}</h1>
                    <p style="color: #555; font-size: 1.1rem; margin-bottom: 0.5rem;">
                        {{ .Params.author }} | {{ .Date.Format "January 2, 2006" }} | 
                        <a href="mailto:{{ .Params.email }}" style="color: #007acc;">{{ .Params.email }}</a>
                    </p>

                    <!-- Featured image and summary -->
                    <div style="overflow: hidden;">
                        {{ with .Resources.GetMatch "featured.*" }}
                        <img src="{{ .RelPermalink }}" alt="{{ .Params.title | default .Title }}" style="
                            float: left;
                            width: 200px;
                            height: auto;
                            object-fit: cover;
                            margin-right: 1.5rem;
                            margin-bottom: 1rem;
                            border-radius: 8px;
                            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                        ">
                        {{ end }}
                        <p style="font-size: 1.25rem; color: #666;">{{ .Params.summary }}</p>
                    </div>
                </header>

                <!-- Project Links: GitHub, GitHub Pages, etc. -->
                {{ if .Params.links }}
                <section style="margin-bottom: 1rem;">
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        {{ range .Params.links }}
                        <a href="{{ .url }}" target="_blank" style="
                            padding: 0.75rem 1.5rem;
                            background-color: #007acc;
                            color: white;
                            border-radius: 5px;
                            text-decoration: none;
                            transition: background-color 0.3s ease;
                            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                        "
                        onmouseover="this.style.backgroundColor='#005fa3';" 
                        onmouseout="this.style.backgroundColor='#007acc';">
                            {{ .name }}
                        </a>
                        {{ end }}
                        <!-- Social Share Buttons -->
                        <a href="https://twitter.com/intent/tweet?text={{ .Title | urlize }}&url={{ .Permalink }}" target="_blank" style="
                            padding: 0.75rem 0.75rem;
                            background-color: #1DA1F2;
                            color: white;
                            border-radius: 5px;
                            text-decoration: none;
                            transition: background-color 0.3s ease;
                        ">
                            <i class="fab fa-twitter"></i> Tweet
                        </a>

                        <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ .Permalink }}" target="_blank" style="
                            padding: 0.75rem 0.75rem;
                            background-color: #0077B5;
                            color: white;
                            border-radius: 5px;
                            text-decoration: none;
                            transition: background-color 0.3s ease;
                        ">
                            <i class="fab fa-linkedin"></i> Share
                        </a>

                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ .Permalink }}" target="_blank" style="
                            padding: 0.75rem 0.75rem;
                            background-color: #1877F2;
                            color: white;
                            border-radius: 5px;
                            text-decoration: none;
                            transition: background-color 0.3s ease;
                        ">
                            <i class="fab fa-facebook"></i> Share
                        </a>
                    </div>
                </section>
                {{ end }}

                <!-- Project Description -->
                <section style="margin-bottom: 3rem;">
                    <h2 style="font-size: 1.75rem; font-weight: 600; color: #007acc;">Project Description</h2>
                    <div style="font-size: 1.1rem; color: #555; line-height: 1.8;">
                        {{ .Content }}
                    </div>
                </section>

                <!-- Contributors Section -->
                {{ if .Params.contributors }}
                <section style="margin-bottom: 3rem;">
                    <h2 style="font-size: 1.75rem; font-weight: 600; color: #007acc;">Contributors</h2>
                    <ul style="list-style: none; padding: 0;">
                        {{ range .Params.contributors }}
                        <li style="margin-bottom: 0.5rem;">
                            <strong>{{ .name }}</strong> - {{ .commits }} commits
                        </li>
                        {{ end }}
                    </ul>
                </section>
                {{ end }}

                <!-- Comments Section (Disqus) -->
                {{ if .Site.Params.disqus }}
                <section style="margin-top: 3rem;">
                    <h2 style="font-size: 1.75rem; font-weight: 600; color: #007acc;">Comments</h2>
                    {{ partial "disqus.html" . }}
                </section>
                {{ end }}
            </div>

            <!-- Sidebar: Related Projects and Tags -->
            <aside>
                <!-- Related Projects -->
                {{ $related := .Site.RegularPages.Related . | first 5 }}
                {{ if gt (len $related) 0 }}
                <section style="margin-bottom: 1rem;">
                    <h2 style="font-size: 1.5rem;">Related Projects</h2>
                    <ul style="list-style: none; padding: 0;">
                        {{ range $related }}
                        <li style="margin-bottom: 0.5rem;">
                            <a href="{{ .Permalink }}" style="color: #007acc; text-decoration: none;">
                                {{ .Title }}
                            </a>
                        </li>
                        {{ end }}
                    </ul>
                </section>
                {{ end }}

                <!-- Tags -->
                {{ if .Params.tags }}
                <section style="margin-bottom: 1rem;">
                    <h2 style="font-size: 1.5rem;">Tags</h2>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        {{ range .Params.tags }}
                        <a href="/tags/{{ . | urlize }}" style="
                            padding: 0.5rem 1rem;
                            background-color: #f0f0f0;
                            border-radius: 20px;
                            font-size: 1rem;
                            text-decoration: none;
                            color: #007acc;
                            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                        ">
                            {{ . }}
                        </a>
                        {{ end }}
                    </div>
                </section>
                {{ end }}
            </aside>
        </div>
    </div>
</section>
{{ end }}
